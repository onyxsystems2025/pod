<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}POD - Proof of Delivery{% endblock %}</title>
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>
    <script defer src="https://unpkg.com/alpinejs@3.14.8/dist/cdn.min.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --success: #16a34a;
            --warning: #d97706;
            --danger: #dc2626;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-500: #6b7280;
            --gray-700: #374151;
            --gray-900: #111827;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--gray-50); color: var(--gray-900); }
        a { color: var(--primary); text-decoration: none; }
        a:hover { text-decoration: underline; }

        .layout { display: flex; min-height: 100vh; }
        .sidebar { width: 240px; background: var(--gray-900); color: white; padding: 1rem 0; position: fixed; height: 100vh; overflow-y: auto; }
        .sidebar-brand { padding: 0 1rem 1rem; font-size: 1.25rem; font-weight: 700; border-bottom: 1px solid var(--gray-700); }
        .sidebar-nav { list-style: none; margin-top: 1rem; }
        .sidebar-nav a { display: block; padding: 0.75rem 1rem; color: var(--gray-300); transition: background 0.2s; }
        .sidebar-nav a:hover, .sidebar-nav a.active { background: var(--gray-700); color: white; text-decoration: none; }

        .main { flex: 1; margin-left: 240px; }
        .topbar { background: white; border-bottom: 1px solid var(--gray-200); padding: 0.75rem 1.5rem; display: flex; justify-content: space-between; align-items: center; }
        .content { padding: 1.5rem; }

        .card { background: white; border-radius: 0.5rem; border: 1px solid var(--gray-200); padding: 1.5rem; margin-bottom: 1rem; }
        .card-header { font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
        .stat-card { background: white; border: 1px solid var(--gray-200); border-radius: 0.5rem; padding: 1.25rem; }
        .stat-value { font-size: 2rem; font-weight: 700; }
        .stat-label { color: var(--gray-500); font-size: 0.875rem; margin-top: 0.25rem; }

        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--gray-200); }
        th { font-weight: 600; color: var(--gray-500); font-size: 0.875rem; text-transform: uppercase; }
        tbody tr:hover { background: var(--gray-50); }

        .badge { display: inline-block; padding: 0.25rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; }
        .badge-created { background: var(--gray-100); color: var(--gray-700); }
        .badge-assigned { background: #dbeafe; color: #1d4ed8; }
        .badge-picked_up, .badge-in_transit { background: #fef3c7; color: #92400e; }
        .badge-out_for_delivery { background: #fed7aa; color: #c2410c; }
        .badge-delivered { background: #dcfce7; color: #166534; }
        .badge-not_delivered { background: #fee2e2; color: #991b1b; }
        .badge-returned { background: #f3e8ff; color: #6b21a8; }
        .badge-cancelled { background: var(--gray-200); color: var(--gray-500); }

        .btn { display: inline-block; padding: 0.5rem 1rem; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 500; border: none; cursor: pointer; transition: background 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); text-decoration: none; }
        .btn-sm { padding: 0.25rem 0.5rem; font-size: 0.75rem; }
        .btn-outline { background: white; border: 1px solid var(--gray-300); color: var(--gray-700); }
        .btn-outline:hover { background: var(--gray-50); text-decoration: none; }
        .btn-danger { background: var(--danger); color: white; }

        .form-group { margin-bottom: 1rem; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 0.25rem; font-size: 0.875rem; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: 0.375rem; font-size: 0.875rem; }
        .form-group textarea { min-height: 80px; resize: vertical; }

        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

        .search-bar { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
        .search-bar input { flex: 1; }

        .timeline { position: relative; padding-left: 1.5rem; }
        .timeline::before { content: ''; position: absolute; left: 0.5rem; top: 0; bottom: 0; width: 2px; background: var(--gray-200); }
        .timeline-item { position: relative; padding-bottom: 1.5rem; }
        .timeline-item::before { content: ''; position: absolute; left: -1.25rem; top: 0.25rem; width: 0.75rem; height: 0.75rem; border-radius: 50%; background: var(--primary); border: 2px solid white; }
        .timeline-item .time { font-size: 0.75rem; color: var(--gray-500); }
        .timeline-item .desc { font-size: 0.875rem; }

        .pagination { display: flex; gap: 0.25rem; margin-top: 1rem; justify-content: center; }
        .pagination a, .pagination span { padding: 0.5rem 0.75rem; border: 1px solid var(--gray-300); border-radius: 0.25rem; font-size: 0.875rem; }
        .pagination .current { background: var(--primary); color: white; border-color: var(--primary); }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% block body %}
    <div class="layout">
        <nav class="sidebar">
            <div class="sidebar-brand">POD System</div>
            <ul class="sidebar-nav">
                <li><a href="/" {% if request.path == '/' %}class="active"{% endif %}>Dashboard</a></li>
                <li><a href="/shipments/" {% if '/shipments' in request.path %}class="active"{% endif %}>Spedizioni</a></li>
                <li><a href="/customers/" {% if '/customers' in request.path %}class="active"{% endif %}>Clienti</a></li>
                <li><a href="/admin/" target="_blank">Admin</a></li>
                <li><a href="/api/docs/" target="_blank">API Docs</a></li>
            </ul>
        </nav>
        <div class="main">
            <div class="topbar">
                <div>{% block page_title %}{% endblock %}</div>
                <div>{{ request.user.get_full_name|default:request.user.username }}</div>
            </div>
            <div class="content">
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>
    {% endblock %}
    {% block extra_js %}{% endblock %}
</body>
</html>
